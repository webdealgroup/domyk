(function(c,N,q){function r(b){c(b).contents().each(function(){if(3===this.nodeType&&this.data)return z(this),!0;var b=c(this);if(!(1!==this.nodeType||b.hasClass(f)&&b.hasClass(f+"-original")&&b.hasClass(f+"-copy")))return r(this),!0})}function z(b){var d,a,k,g,e=b.nodeValue,l=0;if(e&&!/^\s*$/.test(e)){e=e.replace(A,n+"$1").replace(B,"$1"+n).replace(C,n+"$1"+n);d=e.split(D);var e=e.replace(E,""),f=document.createDocumentFragment(),l=F.exec(e)[1].length;c.each(d,function(){a=this.length;if(!a)return!0; s.lastIndex=l+a;k=s.exec(e);var b=e.substr(l,a+k[1].length);if(b.length){var d=G.cloneNode(!1),c=H.cloneNode(!1),h=I.cloneNode(!1);d.appendChild(h);d.appendChild(c);c.appendChild(document.createTextNode(b));h.appendChild(document.createTextNode(b));g=d}else g=null;null!==g&&f.appendChild(g);l=l+a+k[1].length});b.parentNode.replaceChild(f.cloneNode(!0),b)}}function J(b){b=c(b);b.find("."+f+"-copy").remove();b.find("."+f+"-original").unwrap().each(function(){c(this).replaceWith(this.childNodes)})}function K(b, d){b.length&&!b[0].currentStyle||b.each(function(){for(var a=d||this.currentStyle["text-shadow"],b=c(this),g=this.parentNode,e=0;(!a||"none"===a)&&"HTML"!==g.nodeName;)a=g.currentStyle["text-shadow"],g=g.parentNode;if(!a||"none"===a)return!0;a=a.split(L);c.each(a,function(){if(","==this)return!0;var a=this.match(M),d="inherit",c=1,g,t,h;u.test(a[0])?(c=v(a[0]),d=w(a.shift())):u.test(a[a.length-1])&&(c=v(a[a.length-1]),d=w(a.pop()));g=parseFloat(a[0]);t=parseFloat(a[1]);a=a[2]!==q?parseFloat(a[2]): 0;h=0==e?b:b.clone().prependTo(b.parent()).addClass(f+"-copy-"+(e+1)).removeClass(f+"-copy-1");h.css({color:d,left:g-a+"px",top:t-a+"px"});if(1>c||0<a)h[0].style.filter=[1>c?x+"Alpha(opacity="+parseInt(100*c,10)+") ":"",0<a?x+"Blur(pixelRadius="+a+")":""].join("");e++})})}function w(b){var d=y.exec(b),a;if(d&&"hsl"===d[1]){a=d[3];var c=d[4],g,e,f;a/=100;c/=100;0===a?c=f=a=255*c:(a=0.5>=c?c*(a+1):c+a-c*a,g=2*c-a,e=d[2]/360,c=p(g,a,e+1/3),f=p(g,a,e),a=p(g,a,e-1/3));a=[c,f,a];d[2]=a[0];d[3]=a[1];d[4]= a[2]}return d?"#"+(16777216|d[2]<<16|d[3]<<8|d[4]).toString(16).substr(1):b}function v(b){return(b=y.exec(b))?b[5]!==q?b[5]:1:1}function p(b,c,a){0>a?a+=1:1<a&&(a-=1);return 255*(1>6*a?b+(c-b)*a*6:1>2*a?c:2>3*a?b+(c-b)*(2/3-a)*6:b)}var M=/(-?\d+px|(?:hsl|rgb)a?\(.+?\)|#(?:[a-fA-F0-9]{3}){1,2}|0)/g,L=/(,)(?=(?:[^\)]|\([^\)]*\))*$)/,u=/^((?:rgb|hsl)a?|#)/,y=/(rgb|hsl)a?\(\s*(\d+)\s*,\s*(\d+)%?\s*,\s*(\d+)%?(?:\s*,\s*([\.\d]+))?/,x="progid:DXImageTransform.Microsoft.",n="\u2063",E=/\u2063/g,A=/([\(\[\{])/g, B=/([\)\]\}%\u00b0\!\?\u2014])/g,C=/([\-\u2013])/g,D=/[\s\u2063]/,s=/(\s*)/g,F=/^(\s*)/,f="ui-text-shadow";c.fn.textshadow=function(b,d){"object"!==typeof b||d||(d=b,b=null);var a=d||{},k=!1===a.useStyle?!1:!0,g=a.numShadows||1;return a.destroy?this.each(function(){J(this)}):this.each(function(){var a=c(this),d="."+f+"-copy",m;m=a.find(d);m.length||(r(this),m=a.find(d));k?K(m,b):1<g&&m.filter(d+"-1").each(function(){for(var a=1,b=c(this.parentNode),e;a<g;)e=d+"-"+(a+1),b.find(e).length||(e=c(this.cloneNode(!0)).addClass(e.substring(1)).removeClass(f+ "-copy-1"),b.prepend(e)),a++})})};var G=c('<span class="'+f+'" />')[0],H=c('<span class="'+f+'-original" />')[0],I=c('<span class="'+f+"-copy "+f+'-copy-1" />')[0]})(jQuery,this);